<!DOCTYPE html>
<html lang="lt">
<head>
<meta charset="UTF-8">
<title>LKL StatymÅ³ SkaiÄiuoklÄ—</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root{--bg:#f2f2f2;--card:#fff;--text:#000}
.dark{--bg:#121212;--card:#1e1e1e;--text:#fff}
body{font-family:Arial;background:var(--bg);color:var(--text);padding:15px}
h1{text-align:center}
.card{background:var(--card);padding:15px;border-radius:10px;margin-bottom:15px}
input,select,button{width:100%;padding:10px;margin-bottom:8px}
button{background:#333;color:#fff;border:none;border-radius:6px}
table{width:100%;border-collapse:collapse;font-size:13px}
th,td{border:1px solid #666;padding:5px;text-align:center}
.best{background:limegreen;color:#000;font-weight:bold}
.delete{color:red;cursor:pointer}
small{opacity:.7}
</style>
</head>
<body>

<h1>ğŸ€ LKL StatymÅ³ SkaiÄiuoklÄ—</h1>
<button onclick="toggleDark()">ğŸŒ™ Dark mode</button>

<div class="card">
<h3>â• Ä®vesk ateinanÄias rungtynes</h3>
<form id="matchForm">
<input id="league" placeholder="Lyga (pvz. LKL)" required>
<input id="team" placeholder="Komanda" required>
<input id="odds" type="number" step="0.01" placeholder="Koeficientas" required>
<input id="prob" type="number" step="0.01" placeholder="Tavo tikimybÄ— (0â€“1)" required>
<input id="stake" type="number" placeholder="Statymas â‚¬" required>
<button type="submit">â• PridÄ—ti rungtynes</button>
</form>
</div>

<div class="card">
<h3>ğŸ“Š RungtynÄ—s ir rekomenduojamas statymas</h3>
<table>
<thead>
<tr>
<th>Lyga</th><th>Komanda</th><th>Koef.</th><th>Stake</th><th>Value</th><th>Kelly â‚¬</th><th>âŒ</th>
</tr>
</thead>
<tbody id="matches"></tbody>
</table>
</div>

<div class="card" id="bestBetCard"></div>

<script>
let matches = JSON.parse(localStorage.getItem("matches")) || [];
let dark = localStorage.getItem("dark") === "true";
if(dark) document.body.classList.add("dark");

function toggleDark(){
  document.body.classList.toggle("dark");
  localStorage.setItem("dark",document.body.classList.contains("dark"));
}

function valueBet(p,o){return p*o-1;}
function kelly(p,o,bank=100){let k=((p*(o-1)-(1-p))/(o-1));return k>0?(k*bank).toFixed(2):0;}
function profit(b){return b.result==="win"?b.stake*b.odds-b.stake:-b.stake;}

function calculateBest(matches){
  if(!matches.length) return null;
  let best = matches[0];
  matches.forEach(m => {
    m.value = valueBet(m.prob,m.odds);
    m.kelly = parseFloat(kelly(m.prob,m.odds));
    if(m.value > best.value) best = m;
  });
  return best;
}

function render(){
  const tbody = document.getElementById("matches");
  tbody.innerHTML="";
  matches.forEach((m,i)=>{
    let row = document.createElement("tr");
    if(calculateBest(matches)===m) row.classList.add("best");
    row.innerHTML=`<td>${m.league}</td>
    <td>${m.team}</td>
    <td>${m.odds}</td>
    <td>${m.stake}</td>
    <td>${m.value.toFixed(2)}</td>
    <td>${m.kelly}</td>
    <td class="delete" onclick="deleteMatch(${i})">âœ–</td>`;
    tbody.appendChild(row);
  });

  const best = calculateBest(matches);
  const bestCard = document.getElementById("bestBetCard");
  if(best){
    bestCard.innerHTML=`<b>ğŸ¯ Rekomenduojamas statymas:</b> ${best.team} | Lyga: ${best.league} | Koef.: ${best.odds} | Value: ${best.value.toFixed(2)} | Kelly: ${best.kelly} â‚¬`;
  } else {
    bestCard.innerHTML="";
  }
  localStorage.setItem("matches",JSON.stringify(matches));
}

function deleteMatch(i){matches.splice(i,1);render();}

document.getElementById("matchForm").onsubmit = e=>{
  e.preventDefault();
  matches.push({
    league:league.value,
    team:team.value,
    odds:+odds.value,
    prob:+prob.value,
    stake:+stake.value
  });
  e.target.reset();
  render();
}

render();
</script>

</body>
</html>
