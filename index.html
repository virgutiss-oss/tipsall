<!DOCTYPE html>
<html lang="lt">
<head>
<meta charset="UTF-8">
<title>AsmeninÄ— statymÅ³ analizÄ—</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{--bg:#f2f2f2;--card:#fff;--text:#000}
.dark{--bg:#121212;--card:#1e1e1e;--text:#fff}
body{font-family:Arial;background:var(--bg);color:var(--text);padding:15px}
h1{text-align:center}
.card{background:var(--card);padding:15px;border-radius:10px;margin-bottom:15px}
input,select,button{width:100%;padding:10px;margin-bottom:8px}
button{background:#333;color:#fff;border:none;border-radius:6px}
table{width:100%;border-collapse:collapse;font-size:13px}
th,td{border:1px solid #666;padding:5px;text-align:center}
.delete{color:red;cursor:pointer}
small{opacity:.7}
</style>
</head>

<body>

<h1>ğŸ€ StatymÅ³ analizÄ—</h1>
<button onclick="toggleDark()">ğŸŒ™ Dark mode</button>

<!-- ATEINANÄŒIOS VARÅ½YBOS -->
<div class="card">
<h3>ğŸ“… AteinanÄios varÅ¾ybos</h3>

<select id="upLeague"></select>
<input id="home" placeholder="NamÅ³ komanda">
<input id="away" placeholder="SveÄiÅ³ komanda">
<input id="date" type="datetime-local">
<button onclick="addMatch()">â• PridÄ—ti varÅ¾ybas</button>

<table>
<thead>
<tr><th>Lyga</th><th>VarÅ¾ybos</th><th>Data</th><th>ğŸ¯</th></tr>
</thead>
<tbody id="matches"></tbody>
</table>
</div>

<!-- STATYMAS -->
<div class="card">
<form id="betForm">
<select id="league" onchange="loadTeams()" required></select>
<select id="team" required></select>
<input id="odds" type="number" step="0.01" placeholder="Koeficientas" required>
<input id="stake" type="number" placeholder="Statymas â‚¬" required>
<input id="prob" type="number" step="0.01" placeholder="Mano tikimybÄ— (0â€“1)" required>
<select id="result">
<option value="">Rezultatas</option>
<option value="win">Win</option>
<option value="loss">Loss</option>
</select>
<button type="submit">â• PridÄ—ti statymÄ…</button>
</form>
</div>

<div class="card">
<table>
<thead>
<tr><th>Lyga</th><th>Komanda</th><th>Odds</th><th>Stake</th><th>Value</th><th>P/L</th><th>âŒ</th></tr>
</thead>
<tbody id="bets"></tbody>
</table>
</div>

<div class="card" id="stats"></div>
<div class="card"><canvas id="chart"></canvas></div>

<script>
const leagues={
"LKL":["Å½algiris","Rytas","Wolves","Lietkabelis","NeptÅ«nas","Juventus","Å iauliai","NevÄ—Å¾is"],
"ACB":["Real Madrid","Barcelona","Baskonia","Valencia"],
"BSL":["FenerbahÃ§e","Anadolu Efes","Galatasaray"],
"BBL":["Alba Berlin","Bayern Munich"],
"LNB":["Monaco","ASVEL","Paris"],
"NBA":["Boston Celtics","LA Lakers","Golden State Warriors","Denver Nuggets"]
};

let bets=JSON.parse(localStorage.getItem("bets"))||[];
let matches=JSON.parse(localStorage.getItem("matches"))||[];
let dark=localStorage.getItem("dark")==="true";
if(dark)document.body.classList.add("dark");

function toggleDark(){
document.body.classList.toggle("dark");
localStorage.setItem("dark",document.body.classList.contains("dark"));
}

Object.keys(leagues).forEach(l=>{
league.innerHTML+=`<option>${l}</option>`;
upLeague.innerHTML+=`<option>${l}</option>`;
});

function loadTeams(){
team.innerHTML="";
leagues[league.value].forEach(t=>team.innerHTML+=`<option>${t}</option>`);
}
loadTeams();

function addMatch(){
matches.push({
league:upLeague.value,
home:home.value,
away:away.value,
date:date.value
});
localStorage.setItem("matches",JSON.stringify(matches));
renderMatches();
}

function renderMatches(){
matchesEl.innerHTML="";
matches.forEach((m,i)=>{
matchesEl.innerHTML+=`
<tr>
<td>${m.league}</td>
<td>${m.home} vs ${m.away}</td>
<td>${m.date.replace("T"," ")}</td>
<td><button onclick="quickBet('${m.league}','${m.home}')">STATYTI</button></td>
</tr>`;
});
}

function quickBet(lg,tm){
league.value=lg;
loadTeams();
team.value=tm;
window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"});
}

function valueBet(p,o){return p*o-1}
function profit(b){return b.result==="win"?b.stake*b.odds-b.stake:b.result==="loss"?-b.stake:0}

let chart;
function render(){
betsEl.innerHTML="";
let ts=0,tp=0,b=0,curve=[];
bets.forEach((x,i)=>{
ts+=x.stake;tp+=profit(x);b+=profit(x);curve.push(b);
betsEl.innerHTML+=`
<tr>
<td>${x.league}</td><td>${x.team}</td><td>${x.odds}</td>
<td>${x.stake}</td><td>${valueBet(x.prob,x.odds).toFixed(2)}</td>
<td>${profit(x).toFixed(2)}</td>
<td class="delete" onclick="bets.splice(${i},1);render()">âœ–</td>
</tr>`;
});
stats.innerHTML=`ğŸ’° Pelnas: ${tp.toFixed(2)} â‚¬ | ğŸ“ˆ ROI: ${(ts?(tp/ts*100):0).toFixed(2)}%`;
if(chart)chart.destroy();
chart=new Chart(chartEl,{type:"line",data:{labels:curve.map((_,i)=>i+1),datasets:[{data:curve,borderColor:"green"}]},options:{plugins:{legend:{display:false}}}});
localStorage.setItem("bets",JSON.stringify(bets));
}

betForm.onsubmit=e=>{
e.preventDefault();
bets.push({
league:league.value,
team:team.value,
odds:+odds.value,
stake:+stake.value,
prob:+prob.value,
result:result.value
});
betForm.reset();render();
};

const betsEl=document.getElementById("bets");
const stats=document.getElementById("stats");
const chartEl=document.getElementById("chart");
const matchesEl=document.getElementById("matches");

render();
renderMatches();
</script>

</body>
</html>
